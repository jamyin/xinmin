<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>加入球队</title>
    <link href="css/join.css" rel="stylesheet" />
        <script src="/xinmin/js/jquery-2.1.3.min.js"></script>
    <script src="/xinmin/js/My97DatePicker/WdatePicker.js"></script>
    <script src="/xinmin/js/layer-1.9/layer.js"></script>
       <script src="/xinmin/js/jquery.form.js"></script> 
    <script src="/xinmin/js/jquery.upload.js"></script> 
    <script type="text/javascript">
$(document).ready(function(){
	 $("#upload").upload({
         uploadData: { id: "12233" },
         successFn: "success",
         deleteData: { id: function () { return "asdfasdf" } }
     });
});

function valiName(){
	var name = $("#name").val();
	if(name==''||name==null){
		layer.tips('请输入名称！', '#name');	
		return false;
	}if(name.length>20){
		layer.tips('名称不能大于20个字！', '#name');	
		return false;
	}else{
		return true;
	}
}
function valiIdent(){
	var identify = $("#identify").val();
	//身份证正则表达式(15位)   
	isIDCard1=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/;   
	//身份证正则表达式(18位)   
	isIDCard2=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{4}$/; 
	
	if(identify==''||identify==null){
		layer.tips('请输入证件号！', '#identify');	
		return false;
	}/* else if(identify.length<11){
		layer.tips("证件号不能小于11位!",'#identify');
		return false;
	}else if(identify.length>20){
		layer.tips("证件号不能大于20位!",'#identify');
		return false;
	} */
	else if(!isIDCard1.test(identify) && !isIDCard2.test(identify)){
		layer.tips("身份证格式不对！",'#identify');
		return false;
	}
	else{
		return true;
	}
}
function vailBirt(){
	var birthday = $("#birthday").val();
	var tempTime = new Date(birthday);
	var nows = new Date();
	if(nows.getTime()<=tempTime.getTime()){
		layer.tips('出生日期不能大于当前日期','#birthday');
	}
	
}
function vailmobile(){
	var mobile = $("#mobile").val();
	var phone_reg = /^(((13[0-9]{1})|147|(15[0-3]{1})|(15[5-9]{1})|(18[0-3]{1})|(18[5-9]{1}))+\d{8})$/;	
	
	if(mobile==''||mobile==null){
		
		layer.tips('请输入手机号!','#mobile');
		return false;
	}else if (!phone_reg.test(mobile)) {		
		layer.tips('手机号码格式不对！', '#mobile');
		
		return false;
	}else{
		return true;
	}
}
function vailParentName(){
	var parentName=$("#parentName").val();
	if(parentName==''||parentName==null){
		layer.tips('请输入监护人姓名!','#parentName');
		return false;
	}if(parentName.length>20){
		layer.tips('监护人姓名大于20个字！', '#parentName');	
		return false;
	}else{
		return true;
	}
}
function vailParentMobile(){
	var parentMobile=$("#parentMobile").val();
	var phone_reg = /^(((13[0-9]{1})|147|(15[0-3]{1})|(15[5-9]{1})|(18[0-3]{1})|(18[5-9]{1}))+\d{8})$/;	
	
	if(parentMobile==''||parentMobile==null){
		layer.tips('请输入监护人手机号!','#parentMobile');
		return false;
	}else if(!phone_reg.test(parentMobile)){
		layer.tips('监护人手机号格式不正确!','#parentMobile');
		return false;
	}else{
		return true;
	}
}

function vailOrgin(){
	var orgin=$("#orgin").val();
	if(orgin.length>30){
		layer.tips('籍贯不能大于30个字！', '#orgin');	
		return false;
	}else{
		return true;
	}
}
function vailNation(){
	var nation=$("#nation").val();
	if(nation.length>18){
		layer.tips('民族不能大于18个字！', '#nation');	
		return false;
	}else{
		return true;
	}
}

function vailWeight(){
	var weight=$("#weight").val();
	var wei_reg=/^[0-9]{1,3}([.][0-9])?$/;
	if(weight.length>6){
		layer.tips('体重不能大于5位', '#weight');	
		return false;
	}else if(!wei_reg.test(weight)){
		layer.tips('体重必须为数字','#weight');
		return false;
	}else{
		return true;
	}
}
function vailHeight(){
	var height=$("#height").val();
	var wei_reg=/^[0-9]{1,3}([.][0-9])?$/;
	if(height.length>6){
		layer.tips('身高不能大于5位', '#height');	
		return false;
	}else if(!wei_reg.test(height)){
		layer.tips('身高必须为数字','#height');
		return false;
	}else{
		return true;
	}
}

function vailstudent(){
	var students =$("#students").val();
	if(students==''||students==null){
		layer.tips('学籍卡不能为空!','#students');
		return false;
	}else if(students.length!=19){
		layer.tips('学籍卡位数不正确,请重新填写!','#students');
		return false;
	}else{
		return true;
	}
}
</script>
</head>

<body>
    <div class="container">
        <div class="header">
            <div class="header_text">
                加 入 球 队
            </div>
        </div>

        <div class="title">
            1.填写个人信息
        </div>

        <div class="content">
            <table style="border-collapse: collapse; width:100%;">
                <tr style="height:60px;">
                    <td style=" width:10%;  text-align:right; padding-right:10px;">
                        <span style="color:#ff6a00">*</span> 
                        姓名
                    </td>
                    <td>
                        <input id="name" type="text" class="input" onblur="return valiName()"/>
                    </td>
                </tr>
                <tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                        <span style="color:#ff6a00">*</span>
                        身份证
                    </td>
                    <td>
                        <input id="identify" type="text" class="input" onblur="return valiIdent()"/>
                    </td>
                </tr>
                <tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                        <span style="color:#ff6a00">*</span>
                        生日
                    </td>
                    <td>
                        <input id="birthday"  name="startTime" class="Wdate input" type="text" onclick="WdatePicker()"  style="width:400px; height:30px;" onblur="return vailBirt()">
                    </td>
                </tr>
                <tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                        <span style="color:#ff6a00">*</span>
                        手机
                    </td>
                    <td>
                        <input id="mobile" type="text" class="input" onblur="return vailmobile()"/>
                    </td>
                </tr>
                   <tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                        <span style="color:#ff6a00">*</span>
                        学籍卡
                    </td>
                    <td>
                        <input id="students" type="text" class="input" onblur="return vailstudent()"/>
                    </td>
                </tr>

                <tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                        <span style="color:#ff6a00">*</span>
                        头像
                    </td>
                    <td style=" ">
                    
                  <input type="hidden" name="thumbnail" id="hfThumbnail" value="/upload/guding/head.png" />
					<span class="img_span" style="float: left">
						<a href="javascript:;" class="file" style=" margin-top:77px;">选择文件<input id="uploadObjId" type="file" name="file" ></a> 
					<!-- <input
						id="uploadObjId" type="file" name="file" style="width: 150px;" /> -->
					</span> <a id="upload" class="file" herf="#" style="float:left; margin-left:10px; margin-top:77px;">上传</a>
					&nbsp;&nbsp;&nbsp;&nbsp;<img id="userImageS" src="/upload/guding/head.png"  style="vertical-align:middle;width:185px; height:186px; border-radius:100%;" />
					<!-- <input
						id="uploadObjId" type="file" name="file" style="width: 150px;" /> -->
                           <!--  <a href="javascript:viod(0);" class="file" style="float:left; margin-right:10px;  ">
                                选择文件
                                <input type="file" name="" id="file">
                            </a> 
                            <img src=" " width="150" style="vertical-align:middle;" />--> 
                    </td>
                   
                </tr>
          
                <tr>
                    <td></td>
                    <td style="color:#FF9900 ">
                        头像清晰，需要本人照片、若不清晰将直接影响报名审核结果,上传图片需小于1M
                    </td>
                </tr>
            </table> 
        </div>

        <div class="title">
            2.监护人信息
        </div>


        <div class="content">
            <table style="border-collapse: collapse; width:100%;">
                <tr style="height:60px;">
                    <td style=" width:10%;  text-align:right; padding-right:10px;">
                        <span style="color:#ff6a00">*</span>
                        姓名
                    </td>
                    <td>
                        <input id="parentName" type="text" class="input" onblur="return vailParentName()"/>
                    </td>
                </tr>
                 
              
                <tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                        <span style="color:#ff6a00">*</span>
                        手机
                    </td>
                    <td>
                        <input id="parentMobile" type="text" class="input" onblur="return vailParentMobile()"/>
                    </td>
                </tr>
                 
               
            </table>
        </div>


        <div class="title">
            3.其他信息
        </div>


        <div class="content">
            <table style="border-collapse: collapse; width:100%;">
                <tr style="height:60px;">
                    <td style=" width:10%;  text-align:right; padding-right:10px;">
                        <!--<span style="color:#ff6a00">*</span>-->
                        籍贯
                    </td>
                    <td>
                        <input id="orgin" type="text" class="input" onblur="return vailOrgin()"/>
                    </td>
                </tr>


                <tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                        <!--<span style="color:#ff6a00">*</span>-->
                        民族
                    </td>
                    <td>
                        <input id="nation" type="text" class="input"  onblur="return vailNation()"/>
                    </td>
                </tr>

                <tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                        <!--<span style="color:#ff6a00">*</span>-->
                        身高(cm)
                    </td>
                    <td>
                        <input id="height" type="text" class="input"  onblur="return vailHeight()"/>
                    </td>
                </tr>

 				<tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                        <!--<span style="color:#ff6a00">*</span>-->
                        体重(kg)
                    </td>
                    <td>
                        <input id="weight" type="text" class="input"  onblur="return vailWeight()"/>
                    </td>
                </tr>

                <tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                        <!-- <span style="color:#ff6a00">*</span> -->
                        位置
                    </td>
                    <td>
                        <select id="posSel" style="width:400px; height:30px;">
							<option value="1">中场</option>
							<option value="2">前卫</option>
							<option value="3">前锋</option>
							<option value="4">后卫</option>
							<option value="5">门将</option>

                        </select>
                    </td>
                </tr>
                <tr style="height:60px;">
                    <td style=" width:10%; text-align:right; padding-right:10px;">
                       
                    </td>
                    <td>
                       <a href="#" class="file" id="join" style="padding:6px 30px;">加入</a>
                    </td>
                </tr>
            </table>
        </div>


    </div>
    
    <script>
	$("#join").click(function(){
		var name =$("#name").val();
		var identify=$("#identify").val();
		var birthday = $("#birthday").val();
		var mobile = $("#mobile").val();
		var parentName=$("#parentName").val();
		var parentMobile = $("#parentMobile").val();
		var nation=$("#nation").val();
		var orgin = $("#orgin").val();
		var weight = $("#weight").val();
		var userImage=$("#hfThumbnail").val();
		var students=$("#students").val();
		var height=$("#height").val();
		var posSel=$("#posSel").find("option:selected").val(); 
		if(name==''||identify==''||birthday==''||mobile==''||userImage==''||parentName==''||parentMobile==''||students==''){
			layer.msg("带*框信息不能为空!");
			return false;
		}
	
			var phone_reg = /^(((13[0-9]{1})|147|(15[0-3]{1})|(15[5-9]{1})|(18[0-3]{1})|(18[5-9]{1}))+\d{8})$/;	
			var wei_reg=/^[0-9]{1,3}([.][0-9])?$/;
		var captainPhone = $("#mobile").val();
		if (!phone_reg.test(captainPhone)) {		
			//layer.tips('手机号码格式不对！', '#captainPhone');
			layer.msg("手机号码格式不对");
			return false;
		}
		if(!phone_reg.test(parentMobile)){
			layer.msg("监护人手机号码格式不对");
			return false;
		}
		if(identify.length<11){
			layer.msg("证件号不能小于11位");
			return false;
		}
		/* if(identify.length>20){
			layer.msg("证件号不能大于20位");
			return false;
		} */
		//身份证正则表达式(15位)   
		isIDCard1=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/;   
		//身份证正则表达式(18位)   
		isIDCard2=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{4}$/; 
		if(!isIDCard1.test(identify) && !isIDCard2.test(identify)){
			layer.tips("身份证格式不对！",'#identify');
			return false;
		}
		if(students.length!=19){
			layer.msg("学籍卡位数不正确，请重新填写");
			return false;
		}
		if(nation!=''&&nation!=null&&nation.length>18){
			layer.msg('民族不能大于18个字！');	
			return false;
		}
		if(orgin!=''&&orgin!=null&&orgin.length>30){
			layer.msg('籍贯不能大于30个字！');	
			return false;
		}
		if(weight!=null&&weight!=''&&!wei_reg.test(weight)){
			layer.msg('体重必须为数字');
			return false;
		}
		if(weight!=null&&weight!=''&&weight.length>6){
			layer.msg('体重不能大于5位');
			return false;
		}
		if(height!=null&&height!=''&&!wei_reg.test(height)){
			layer.msg('身高必须为数字');
			return false;
		}
		
		if(height!=null&&height!=''&&height.length>6){
			
			layer.msg('身高不能大于5位');
			return false;
		}
		
		var birthday = $("#birthday").val();
		var tempTime = new Date(birthday);
		var nows = new Date();
		if(nows.getTime()<=tempTime.getTime()){
			layer.msg('出生日期不能大于当前日期');
			return false;
		}
		
		jQuery.ajax({
			url:'/xinmin/umanages/join.do',
			type:'POST',
			dataType :'json',
			data :{realName:name,identifyId:identify,tempBirthday:birthday,mobileNo:mobile,guardName:parentName,guardMobile:parentMobile,orgin:orgin,nation:nation,userImage:userImage,pos:posSel,studentCard:students,height:height,weight:weight},
			success : function(data){
				if(data.status==200){
					layer.msg("加入成功！");
					setTimeout(function(){location.href="/xinmin/user.html?id="+data.data+"";}, 3000 );	
				}else{
					layer.msg(data.message);
				}
			}
		});
		
	});
</script>
</body>
</html>
